var initPhotoSwipeFromDOM=function(a){for(var b=function(a){for(var b,c,d,e,f=a.childNodes,g=f.length,h=[],j=0;j<g;j++)(b=f[j],1===b.nodeType)&&(c=b.children[0],d=c.getAttribute("data-size").split("x"),e={src:c.getAttribute("href"),w:parseInt(d[0],10),h:parseInt(d[1],10)},1<b.children.length&&(e.title=b.children[1].innerHTML),0<c.children.length&&(e.msrc=c.children[0].getAttribute("src")),e.el=b,h.push(e));return h},c=function a(b,c){return b&&(c(b)?b:a(b.parentNode,c))},d=function(a){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1;var b=a.target||a.srcElement,d=c(b,function(a){return a.tagName&&"FIGURE"===a.tagName.toUpperCase()});if(d){for(var g,h=d.parentNode,j=d.parentNode.childNodes,k=j.length,l=0,m=0;m<k;m++)if(1===j[m].nodeType){if(j[m]===d){g=l;break}l++}return 0<=g&&f(g,h),!1}},e=function(){var a=window.location.hash.substring(1),b={};if(5>a.length)return b;for(var c=a.split("&"),d=0;d<c.length;d++)if(c[d]){var e=c[d].split("=");2>e.length||(b[e[0]]=e[1])}return b.gid&&(b.gid=parseInt(b.gid,10)),b},f=function(a,c,d,e){var f,g,h,i=document.querySelectorAll(".pswp")[0];if(h=b(c),g={showHideOpacity:!0,galleryUID:c.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(a){var b=h[a].el.getElementsByTagName("img")[0],c=window.pageYOffset||document.documentElement.scrollTop,d=b.getBoundingClientRect();return{x:d.left,y:d.top+c,w:d.width}}},!e)g.index=parseInt(a,10);else if(g.galleryPIDs){for(var k=0;k<h.length;k++)if(h[k].pid==a){g.index=k;break}}else g.index=parseInt(a,10)-1;isNaN(g.index)||(d&&(g.showAnimationDuration=0),f=new PhotoSwipe(i,PhotoSwipeUI_Default,h,g),f.init())},g=document.querySelectorAll(a),h=0,j=g.length;h<j;h++)g[h].setAttribute("data-pswp-uid",h+1),g[h].onclick=d;var k=e();k.pid&&k.gid&&f(k.pid,g[k.gid-1],!0,!0)};initPhotoSwipeFromDOM(".my-gallery");